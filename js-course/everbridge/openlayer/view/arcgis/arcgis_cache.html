<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>SelectFeature Control on Layer.Vector</title>
    <link rel="stylesheet" href="../../resources/OpenLayers-2.13/theme/default/style.css" type="text/css">
    <link rel="stylesheet" href="../../resources/page.css" type="text/css">
    <script src="http://maps.google.com/maps/api/js?v=3&sensor=false"></script>
    <script src="../../resources/jsts/javascript.util.js"></script>
    <script src="../../resources/jsts/jsts.js"></script>
    <script src="../../resources/OpenLayers-2.13/lib/OpenLayers.js"></script>
    <script type="text/javascript" src="arcgis.js"></script>
</head>
<body>
<div id="map" class="smallmap" style="width: 1000px;height: 500px"> </div>
</body>
</html>
<script type="text/javascript">
    function init(){
        var layerInfo = Terrain_Base_tiled_LayerOptions;
        //The max extent for spherical mercator
        var maxExtent = new OpenLayers.Bounds(-20037508.34,-20037508.34,20037508.34,20037508.34);

        //Max extent from layerInfo above
        var layerMaxExtent = new OpenLayers.Bounds(
                layerInfo.fullExtent.xmin,
                layerInfo.fullExtent.ymin,
                layerInfo.fullExtent.xmax,
                layerInfo.fullExtent.ymax
        );

        var resolutions = [];
        for (var i=0; i<layerInfo.tileInfo.lods.length; i++) {
            resolutions.push(layerInfo.tileInfo.lods[i].resolution);
        }

        var cacheLayer = new OpenLayers.Layer.ArcGISCache( "AGSCache",
                "http://140.241.251.197/ArcGIS/rest/services/maps/Terrain_Base_tiled/MapServer"
                , {
                    isBaseLayer: true,
                    //From layerInfo above
                    resolutions: resolutions,
                    tileSize: new OpenLayers.Size(layerInfo.tileInfo.cols, layerInfo.tileInfo.rows),
                    tileOrigin: new OpenLayers.LonLat(layerInfo.tileInfo.origin.x , layerInfo.tileInfo.origin.y),
                    maxExtent: layerMaxExtent,
                    projection: 'EPSG:' + layerInfo.spatialReference.wkid
                }
        );

        map = new OpenLayers.Map('map', {
            maxExtent: maxExtent,
            StartBounds: layerMaxExtent,
            units: (layerInfo.units == "esriFeet") ? 'ft' : 'm',
            resolutions: resolutions,
            tileSize: new OpenLayers.Size(layerInfo.tileInfo.width, layerInfo.tileInfo.height),
            projection: 'EPSG:' + layerInfo.spatialReference.wkid
        });
        map.addLayer(cacheLayer);




        // create Google Mercator layers
//        var testLayer = new OpenLayers.Layer.Google(
//                "Google Streets",
//                {'sphericalMercator': true}
//        );

//        map.addLayers([testLayer, cacheLayer]);

//        map.addControl(new OpenLayers.Control.LayerSwitcher());
//        map.addControl( new OpenLayers.Control.MousePosition() );
//
//        map.zoomToExtent(new OpenLayers.Bounds(-8341644, 4711236, -8339198, 4712459));
    }

    init();
</script>
